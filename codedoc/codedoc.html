<!DOCTYPE html>
<html>
  <head>
    <title>How to Use the codedoc Utility</title>
    <meta name="version" content="3.0">
    <meta name="author" content="Michael R Sweet">
    <meta name="copyright" content="Copyright © 2003-2019 by Michael R Sweet">
    <style><!--
body {
  font-family: sans-serif;
  font-size: 18px;
  line-height: 150%;
  margin: 54pt 36pt;
}
h1 {
  page-break-before: always;
}
.title {
  text-align: center;
}
.toc {
  list-style-type: none;
}
a {
  font: inherit;
}
pre, li code, p code {
  font-family: monospace;
}
pre {
  background: #f8f8f8;
  border: solid thin #666;
  font-size: 14px;
  line-height: 120%;
  margin-left: 2em;
  padding: 10px;
  white-space: pre-wrap;
}
li code, p code {
  padding: 2px 5px;
}
blockquote {
  background: #f8f8f8;
  border-left: solid 2px #666;
  margin: 1em 0;
  padding: 0.1em 1em;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
td {
  border: solid 1px #666;
  padding: 5px 10px;
  vertical-align: top;
}
td.left {
  text-align: left;
}
td.center {
  text-align: center;
}
td.right {
  text-align: right;
}
th {
  border-bottom: solid 2px #000;
  padding: 1px 5px;
  text-align: center;
  vertical-align: bottom;
}
tr:nth-child(odd) td {
  background: #f8f8f8;
}
--></style>
  </head>
  <body>
    <h1 class="title">How to Use the codedoc Utility</h1>
    <p class="title">Version 3.0</p>
    <p class="title">by Michael R Sweet</p>
    <p class="title">Copyright © 2003-2019 by Michael R Sweet</p>
	<h1 id="introduction">Introduction</h1>
	<p>Codedoc is a general-purpose utility which scans C and C++ source files to produce an XML file representing the functions, types, and definitions in those source files, as well as EPUB, HTML, and man page documentation that can be read by humans. Unlike popular documentation generators like Doxygen or Javadoc, Codedoc uses in-line comments rather than comment headers, allowing for more &quot;natural&quot; code documentation. Additional markdown documentation content can be included to make the generated documentation even more useful and complete.</p>
	<p>Codedoc is licensed under the Apache License Version 2.0 with an exception to allow linking against GPL2/LGPL2-only software. See the files &quot;LICENSE&quot; and &quot;NOTICE&quot; in the source code archive or Git repository for more information.</p>
	<h2 id="history">History</h2>
	<p>Codedoc was originally part of the <a href="https://www.msweet.org/mxml">Mini-XML</a> project (as &quot;codedoc&quot;) and was developed specifically to generate the API documentation for Mini-XML and <a href="https://www.cups.org">CUPS</a>.</p>
	<h1 id="running-codedoc">Running Codedoc</h1>
	<p>Codedoc produces HTML documentation by default. For example, the following command will scan all of the C source and header files in the current directory and produce a HTML documentation file called &quot;documentation.html&quot;:</p>
	   <pre><code>codedoc *.h *.c &gt;documentation.html
</code></pre>
	<p>You can also specify an XML file to create which contains all of the information from the source files. For example, the following command creates an XML file called &quot;documentation.xml&quot; in addition to the HTML file:</p>
	   <pre><code>codedoc documentation.xml *.h *.c &gt;documentation.html
</code></pre>
	<p>The <code>--no-output</code> option disables the default HTML output:</p>
	   <pre><code>codedoc --no-output documentation.xml *.h *.c
</code></pre>
	<p>You can then run codedoc again with the XML file alone to generate the HTML documentation:</p>
	   <pre><code>codedoc documentation.xml &gt;documentation.html
</code></pre>
	<h2 id="creating-man-pages">Creating Man Pages</h2>
	<p>The <code>--man name</code> option tells codedoc to create a man page instead of HTML documentation, for example:</p>
	   <pre><code>codedoc --man libexample *.h *.c &gt;libexample.3
</code><code>codedoc --man libexample documentation.xml *.h *.c &gt;libexample.3
</code><code>codedoc --man libexample documentation.xml &gt;libexample.3
</code></pre>
	<h2 id="creating-epub-books">Creating EPUB Books</h2>
	<p>The <code>--epub filename.epub</code> option tells codedoc to create an EPUB book containing the HTML documentation, for example:</p>
	   <pre><code>codedoc --epub documentation.epub *.h *.c
</code><code>codedoc --epub documentation.epub documentation.xml *.h *.c
</code><code>codedoc --epub documentation.epub documentation.xml
</code></pre>
	<h2 id="adding-content-and-metadata">Adding Content and Metadata</h2>
	<p>Codedoc supports several options for adding content and metadata to the generated documentation:</p>
	<ul>
	<li><code>--author &quot;name&quot;</code>: Sets the author name</li>
	<li><code>--body filename</code>: Inserts the named file between the table of contents and API documentation; the file can be markdown, HTML, or man source</li>
	<li><code>--copyright &quot;copyright text&quot;</code>: Sets the copyright string</li>
	<li><code>--coverimage filename.png</code>: Uses the specified cover page image file</li>
	<li><code>--css filename.css</code>: Uses the specified style sheet file (HTML and EPUB output)</li>
	<li><code>--footer filename</code>: Appends the named file after the API documentation; the file can be markdown, HTML, or man source</li>
	<li><code>--header filename</code>: Inserts the named file before the table of contents; the file can be markdown, HTML, or man source</li>
	<li><code>--section &quot;{name,number}&quot;</code>: Sets the section/category name (HTML and EPUB output) or section number (man page output)</li>
	<li><code>--title &quot;title text'</code>; Sets the title text</li>
</ul>
	<h1 id="annotating-your-code">Annotating Your Code</h1>
	<p>Codedoc looks for in-line comments to describe the functions, types, and constants in your code. Codedoc documents all public names it finds in your source files - any names starting with the underscore character (_) or names that are documented with the <a href="#-directives-in-comments"><code>@private@</code></a> directive are treated as private and are not documented.</p>
	<p>Comments appearing directly before a function or type definition are used to document that function or type. Comments appearing after argument, definition, return type, or variable declarations are used to document that argument, definition, return type, or variable. For example, the following code excerpt defines a key/value structure and a function that creates a new instance of that structure:</p>
	   <pre><code>/* A key/value pair. This is used with the
</code><code>   dictionary structure. */
</code><code>
</code><code>struct keyval
</code><code>{
</code><code>  char *key; /* Key string */
</code><code>  char *val; /* Value string */
</code><code>};
</code><code>
</code><code>/* Create a new key/value pair. */
</code><code>
</code><code>struct keyval * /* New key/value pair */
</code><code>new_keyval(
</code><code>    const char *key, /* Key string */
</code><code>    const char *val) /* Value string */
</code><code>{
</code><code>  ...
</code><code>}
</code></pre>
	<p>Codedoc also knows to remove extra asterisks (*) from the comment string, so the comment string:</p>
	   <pre><code>/*
</code><code> * Compute the value of PI.
</code><code> *
</code><code> * The function connects to an Internet server that streams audio of
</code><code> * mathematical monks chanting the first 100 digits of PI.
</code><code> */
</code></pre>
	<p>will be shown as:</p>
	<blockquote>
	<p>Compute the value of PI.</p>
	<p>The function connects to an Internet server that streams audio of mathematical monks chanting the first 100 digits of PI.</p>
</blockquote>
	<h2 id="-directives-in-comments">@ Directives in Comments</h2>
	<p>Comments can also include the following special <code>@name ...@</code> directive strings:</p>
	<ul>
	<li><code>@code text@</code>: formats the text as code</li>
	<li><code>@deprecated@</code>: flags the item as deprecated to discourage its use</li>
	<li><code>@exclude format[,...,format]@</code>: excludes the item from the documentation in the specified formats: &quot;all&quot; for all formats, &quot;epub&quot; for EPUB books, &quot;html&quot; for HTML output, and &quot;man&quot; for man page output</li>
	<li><code>@link name@</code>: creates a hyperlink to the named function, type, etc.</li>
	<li><code>@private@</code>: flags the item as private so it will not be included in the documentation</li>
	<li><code>@since ...@</code>: flags the item as new since a particular release. The text following the <code>@since</code> up to the closing <code>@</code> is highlighted in the generated documentation, e.g. <code>@since libexample 1.1@</code>.</li>
</ul>
	 </body>
</html>
